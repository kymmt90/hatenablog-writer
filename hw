#!/usr/bin/env ruby

require './hb_writer'
require 'optparse'

USAGE = './hw [-d] entry'

options = ARGV.getopts('d')

if ARGV.size != 1
  warn USAGE
  exit
end

writer = HBWriter.new
open(ARGV[0], 'r+') do |f|
  if options['d']
    entry = writer.delete_entry(f.read)
  else
    entry = writer.post_entry(f.read)
  end
  f.seek(0, IO::SEEK_SET)
  f.write(entry)
end
